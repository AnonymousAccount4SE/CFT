
# Travel simulator
#
# At 1000G acceleration: 
# 	- real time 1.7 days
#   - 4.79c
#   - 352550 light seconds = 4 light days
#   -
#
# At 1M G obtaining Light speed after 30 seconds ...
# 
# --
	P(1,Input("N x G accel").get.parseFloat) => factor
	acc=9.8*factor

	pos=0.0
	startTime=currentTimeMillis

	
	loop
		readLine("Press ENTER or q to quit") => x
		break(x=="q")

		
		
		
		seconds=(currentTimeMillis-startTime)/1000
		vel=acc*seconds # m/s
		pos=0.5 * acc * seconds * seconds	

		km = pos/1000
		au = km/149597870.0

		vel/1000*3600 => kph

		vel/300000/1000 => fractC

		println("seconds= " + seconds.i)
		println("accel  = " + acc)
		println("vel    = " + vel.i + " m/s")
		println("kph    = " + kph.i)
		println("km     = " + km.i)
		println("au     = " + au)
		println("light seconds = " + (km/300000).i)
		println("vel/C  = " + fractC)
/travel


# Accelerating 1 gram pellets backwards to push 30 ton spaceship forward at 1G
# Calculating consumption of energy and use of reaction mass at different exhaust velocities.
#
# At 100 GWatt we require 480 milligrams of reaction mass per second
#
# At lower exhaust values, the engine runs more energy efficient, but uses huge amounts of reaction mass.
# At 15 GWatt, reaction mass consumption is 3.1 gram per second
#
# A nice little balancing act.
#
# At 1 TWatt of output, we consume only 48 milligrams of reaction mass per second
#
# 1 MWh is about 3grams of Uranium - far too low energy density
#
# Let's assume using a reactor that extracts 10% of E=mc2 energy of fuel
# 
# https://en.wikipedia.org/wiki/Burnup
#
# Nuclear reactors Gen II : 40-60 GWd/t (GigaWattDays) per metric ton of fuel
# Deep Burn Modular Helium Reactor (DB-MHR) might reach 500 GWd/t 
#
# Gen II = 50 GWd/t = 1200 GWh/t = 1.200.000 MWh/t
#
#
# Most advanced = 500 GWd/t = 12 TWh/t = 12.000.000 MWh per ton
#
# Norges strÃ¸mforbruk 2018: 135 TWh = 12 tonn DB-MHR fuel || 120 tonn Gen II fuel
#
# Most advanced: 1 GWh per 12 grams of fuel
# 
# --
	Lib.Data.for(1000 , 100000, 100)->kmPerSecOutputSpeed
		mass=1/1000  # 1 gram - not really relevant for the energy calcuations, only the firings per second
		v=kmPerSecOutputSpeed*1000 # m/s

		# spent energy
		joules=0.5*mass*v*v

		momentum=mass*v
		shipWeight=30*1000 # kg

		speedChange=momentum/shipWeight

		
		accelG=1   

		accel=accelG*9.8 # m/s2

		# number of firings per second
		numberOfFirings=accel / speedChange

		totalEnergy=joules*numberOfFirings   # Joules per second = WattSeconds
		reactionMassPerSecond = mass*numberOfFirings


		fuelEfficiency = 0.123  # According to E=mc2

		fuelEnergyPerKg=300000000*300000000*fuelEfficiency  # Joules (mc2)
		fuelKgsPerDay=totalEnergy*86400/fuelEnergyPerKg

		
		

		report(
			"Exhaust km/s:" + kmPerSecOutputSpeed.i,
#			"accelG:"+accelG,
			## "#pellets/s:" + (numberOfFirings.i),
			"milligrams/s:" + ((reactionMassPerSecond*1000000).i),
			"kg/day:"+(reactionMassPerSecond*86400).i,
			"GW:" + (totalEnergy/1000000000).i,
			"Fuel/kg/day:" + ((fuelKgsPerDay).i)  
		)
/e


# MassVelocity of 1 milligram at speed of light
# Converted to push 1 kg of space ship, calculate resulting speed in m/s
# ---
	mass=1/1000000  # 1 milligram as kg
	v=300000000 # lightspeed as m/s
	mv = mass*v

	mv/1

	# 0.3 m/s
		
	
/mv1
	

# Joules of energy to accelerate 1 kilo at 1G for one second
# --
	mass=1
	accel=9.8 # m/s2
	time=86400 # seconds
	speed=accel*time

	e=0.5*mass*speed*speed

	e
	# 48 Joules
/e2


# Accelerated dist
# --
	P(1) => a
	P(2) => t

	0.5 * a * t * t
/adist

# Cruising dist
# --
	P(1) => speed
	P(2) => t

	speed * t
/ddist
