# Readme
# --
<<<< EOF
This script is for background jobs control, as started by
the '&' expression, which has the following syntax

& expr

or 

& expr, name

where name is an identifier or a string, to identify the process.

/StartHeavyTasks
>>>> EOF
->line println("| " + line)
/Readme



# Get running job names
# --
	Sys.Jobs.namesRunning
/Running


# Return completed job names (for integration into prompt)
# --
	Sys.Jobs.namesCompleted
/Completed


# Get single result from first terminated process
# --
	completed = Sys.Jobs.namesCompleted
	error(completed.length==0, "No completed jobs")

	name=completed.first
	proc=Sys.Jobs.getCompleted(name)

	Lib:Header(name)
	output=proc.output
	if (output.length > 0) Inner {
		output->line println(line)
	} @rel

	Sys.Jobs.deleteCompleted(name)
	
	proc.exitValue
/Get


# Clear all completed jobs
# --
	Sys.Jobs.namesCompleted->name Sys.Jobs.deleteCompleted(name)
/Clear