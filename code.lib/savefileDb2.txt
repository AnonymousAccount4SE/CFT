# Readme
# --
<<< EOF

Simple file based database v2 - using Java implementation Lib.Db.Db2
Also see script file Db2Obj


>>> EOF
/Readme


# Helper
# --
	Lib:Header("Enter collection.")
	Collections->c println("   " +c) |

	Input("collection").get
/inputCollection


		
# Store data
# --
	P(1)=>collection
	P(2)=>key
	P(3)=>value

	error(collection.startsWith("."), "Invalid collection, '.' indicates system collections")
	
	x = Lambda {syn(P(1))}
	error (x.?call(value)==false, "Value not synthesizable")
	value = syn(value)
	
	Lib.Db.Db2.set(collection,key,value)

/Set






# Get data
# --
	P(1,inputCollection)=>collection
	P(2,Input("key").get)=>key
	P(3)=>defaultValue
	
	value=Lib.Db.Db2.get(collection,key)

	if (value == null, defaultValue, eval(value))
/Get



# Get keys
# --
	P(1,inputCollection)=>collection
	Lib.Db.Db2.keys(collection)
/Keys



# Get collections
# --
	Lib.Db.Db2.collections.sort
/Collections




# Show content
# --
	P(1,inputCollection)=>collection
	Keys(collection).sort->key
		report(collection, key, Get(collection,key))
/Show




# Shortcut for Collections
	Collections
/Coll




