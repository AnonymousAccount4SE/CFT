# Readme
<<<<<<<<<<<<<<<< EOF
Script testing

2021-11-12 RFO
>>>>>>>>>>>>>>>> EOF
/Readme



# Run all TestX
# --
	Sys.functions.sort->f
		assert(f.startsWith("Test"))
		report(f,eval(f))
/RunAll









# Call Util:Counter() 
# --
	P(1,10)=>numCalls
	loop
		break(numCalls<0)
		numCalls=numCalls-1
		println("Got: " + Util:Counter("test"))
		
//t01_GetCounters

# Create separate threads, each calling GetCounters()
# The idea is that we check that each counter value is obtained
# only once!
#
# Note: needed to add "named lock" for transaction inside Util:Counter,
# which consists of a read and a write.  
# --
	P(1,20)=>numThreads
	i=0
	loop
		break(i>=numThreads)
		i=i+1
		out(SpawnProcess(SymDict(i),t01_GetCounters))
	| -> proc
		proc.wait
		proc.output->line out(line)
	| => allLines
	
	# result
	allLines.length == allLines.unique.length
/Test01_Verifying_Util_Counter_Threaded_test
	 
	 
	 


